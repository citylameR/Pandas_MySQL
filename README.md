# Readme - Выгрузка, обработка и сохранение данных из MySQL в Pandas

Этот проект представляет собой скрипт на языке Python, написанный в Jupyter Notebook, который позволяет выгружать данные из базы данных MySQL, выполнять обработку и агрегацию, а также сохранять полученные результаты в Pandas DataFrames. Вам необходимо выполнить следующие шаги для работы с проектом:

### Шаг 1: Установка необходимых библиотек

Перед запуском скрипта убедитесь, что у вас установлены следующие библиотеки:

- pandas
- sqlalchemy

Если какой-либо из них не установлен, выполните следующие команды в терминале (или командной строке) для установки:
```
pip install pandas
pip install sqlalchemy
```

### Шаг 2: Подключение к базе данных

Для подключения к базе данных MySQL, вам необходимо указать соответствующие параметры подключения в скрипте:

```python
# Укажите параметры подключения к базе данных
db_user = "your_db_username"
db_password = "your_db_password"
db_host = "your_db_host"
db_name = "your_db_name"
```

# Шаг 3: Выгрузка данных и обработка

Скрипт выполнит запрос к базе данных MySQL и выгрузит таблицу с полями: `New_brand`, `Year`, `Month`, `Week`, `TVCompany`, `Programme_genre`, `Quantity`, `Consolidated_cost`, и `TVR_All_18+`. Данные будут сохранены в основной DataFrame `main_df`.

Далее будут проведены следующие дополнительные вычисления и обработки:

1. Добавление столбца с НДС: В основной DataFrame будет добавлен столбец, где на стоимость начисляется НДС. Ставка НДС до 2018 года составляла 18%, с 2019 года - 20%.

2. Очистка названия телекомпаний: Из поля `TVCompany` будет удалено словосочетание "(СЕТЕВОЕ ВЕЩАНИЕ)".

3. Расчет среднего недельного TVR_All_18+ по брендам и годам: Будет создан новый DataFrame `average_tvr_df`, в котором для каждого бренда и года будет рассчитан средний недельный TVR_All_18+.

4. Расчет суммарных Consolidated_cost по годам и телекомпаниям: Будет создан DataFrame `total_cost_by_company_df`, в котором для каждого года и телекомпании будет рассчитана суммарная стоимость объединенных затрат.

5. Расчет средней стоимости рекламы с НДС по жанрам программ: Будет создан DataFrame `average_cost_by_genre_df`, в котором для каждого жанра программ будет рассчитана средняя стоимость выхода рекламы с НДС. Жанры будут упорядочены по убыванию стоимости.

# Шаг 4: Сохранение результатов

После обработки данных, результаты будут сохранены в отдельных DataFrames (`main_df`, `average_tvr_df`, `total_cost_by_company_df`, `average_cost_by_genre_df`) и выведены на экран.

# Шаг 5: Экспорт в .ipynb файл

Результаты выполнения скрипта будут сохранены в Jupyter Notebook формате (.ipynb). Вы сможете открыть этот файл в Jupyter Notebook и просмотреть полученные результаты и код, а также все данные будут выведены в таблицу Excel

